name: Unzip and Prepare RN Project

on:
  workflow_dispatch:

jobs:
  unzip:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Show files BEFORE unzip
        run: ls -R .

      - name: Install unzip
        run: sudo apt-get install -y unzip

      - name: Extract ZIP
        run: |
          unzip -o fungen-rn73-final.zip -d extracted
          echo "---- AFTER EXTRACT ----"
          ls -R extracted

      - name: Move project files to root (auto-detect root folder)
        run: |
          # Detect nested folder inside ZIP
          ROOT_DIR=$(find extracted -maxdepth 2 -mindepth 1 -type d | head -n 1)
          echo "Detected project folder: $ROOT_DIR"

          # Move all extracted files to repo root
          cp -R $ROOT_DIR/* .

          # Cleanup
          rm -rf extracted
          rm fungen-rn73-final.zip

      - name: Show files AFTER unzip
        run: ls -R .
